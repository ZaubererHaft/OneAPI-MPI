cmake_minimum_required(VERSION 3.19)

project(TEST)
set(CMAKE_CXX_COMPILER dpcpp)

find_package(MPI REQUIRED)

set(__MPI_INCLUDES ${MPI_CXX_INCLUDE_DIRS})
set(__MPI_LIBS ${MPI_CXX_LIBRARIES})
set(__MPI_FLAGS ${MPI_CXX_COMPILE_FLAGS})
set(__MPI_LINK_FLAGS ${MPI_CXX_LINK_FLAGS})
set(__MPI_DEFINITIONS ${MPI_CXX_COMPILE_DEFINITIONS})

message(STATUS "__MPI_INCLUDES : ${__MPI_INCLUDES}")
message(STATUS "__MPI_LIBS : ${__MPI_LIBS}")
message(STATUS "__MPI_FLAGS : ${__MPI_FLAGS}")
message(STATUS "__MPI_LINK_FLAGS : ${__MPI_LINK_FLAGS}")
message(STATUS "__MPI_DEFINITIONS : ${__MPI_DEFINITIONS}")

add_executable(TEST src/main.cpp)

target_include_directories(TEST PUBLIC ${__MPI_INCLUDES})
target_compile_definitions(TEST PUBLIC ${__MPI_DEFINITIONS})

target_link_libraries(TEST PUBLIC ${__MPI_LIBS})
target_link_options(TEST PUBLIC  ${__MPI_LINK_FLAGS})

target_compile_options(TEST PUBLIC -Wall -Wextra -pedantic -std=c++17 ${__MPI_FLAGS})

